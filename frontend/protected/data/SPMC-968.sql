INSERT INTO `seg_rep_templates_registry` (`report_id`, `rep_group`, `rep_name`, `rep_description`, `rep_script`, `rep_dept_nr`, `rep_category`, `is_active`, `with_template`, `query_in_jasper`, `template_name`, `exclusive_opd_er`, `exclusive_death`, `w_graphical`) VALUES ('TOP15_ICP_ICD_Detailed', 'Hospital Operations', 'Top 15 ICP ICD Detailed', 'Top 15 ICP ICD Detailed', 'TOP15_ICP_ICD_Detailed', '152', 'HOSP', '1', '1', '0', 'TOP15_ICP_ICD_Detailed', '0', '0', '0'); 
INSERT INTO `seg_rep_params` (`param_id`, `variable`, `parameter`, `param_type`, `choices`, `is_active`, `ordering`) VALUES ('mem_category', NULL, 'Membership Category', 'checkbox', 'SELECT \'all\' AS id, \'All\' AS namedesc\r\nUNION\r\nSELECT memcategory_code AS id, memcategory_desc AS namedesc FROM seg_memcategory', '1', '0'); 
INSERT INTO `seg_rep_params` (`param_id`, `variable`, `parameter`, `param_type`, `choices`, `is_active`, `ordering`) VALUES ('billing_icd', NULL, 'Top 15 ICD', 'sql', 'SELECT\r\n     package.`code` as id,\r\n     package.`description` as namedesc,\r\n     COUNT(bill.bill_nr) AS cnt \r\n   FROM\r\n     seg_billing_encounter AS bill \r\n     INNER JOIN seg_billing_caserate AS caserate \r\n       ON bill.bill_nr = caserate.`bill_nr` \r\n     INNER JOIN `seg_case_rate_packages` AS package \r\n       ON caserate.`package_id` = package.`code` \r\n   WHERE STR_TO_DATE(bill.bill_dte, \'%Y-%m-%d\') >= STR_TO_DATE(\'fromDate\', \'%Y-%m-%d\') \r\n     AND STR_TO_DATE(bill.bill_dte, \'%Y-%m-%d\') <= STR_TO_DATE(\'toDate\', \'%Y-%m-%d\') \r\n     AND bill.is_deleted IS NULL \r\n     AND bill.is_final = 1\r\n     AND caserate.`rate_type` = 1 \r\n     AND package.`case_type` = \'m\'\r\n   GROUP BY package.code \r\n   ORDER BY cnt DESC \r\n   LIMIT 15', '1', '0'); 
INSERT INTO `seg_rep_params` (`param_id`, `variable`, `parameter`, `param_type`, `choices`, `is_active`, `ordering`) VALUES ('billing_icp', NULL, 'Top 15 ICP', 'sql', 'SELECT \r\n     package.`code` as id,\r\n     package.`description` as namedesc,\r\n     COUNT(bill.bill_nr) AS cnt \r\n   FROM\r\n     seg_billing_encounter AS bill \r\n     INNER JOIN seg_billing_caserate AS caserate \r\n       ON bill.bill_nr = caserate.`bill_nr` \r\n     INNER JOIN `seg_case_rate_packages` AS package \r\n       ON caserate.`package_id` = package.`code` \r\n   WHERE STR_TO_DATE(bill.bill_dte, \'%Y-%m-%d\') >= STR_TO_DATE(\'fromDate\', \'%Y-%m-%d\') \r\n     AND STR_TO_DATE(bill.bill_dte, \'%Y-%m-%d\') <= STR_TO_DATE(\'toDate\', \'%Y-%m-%d\') \r\n     AND bill.is_deleted IS NULL \r\n     AND bill.is_final = 1\r\n     AND caserate.`rate_type` = 1 \r\n     AND package.`case_type` = \'p\'\r\n   GROUP BY package.code \r\n   ORDER BY cnt DESC \r\n   LIMIT 15', '1', '0'); 
INSERT INTO `seg_rep_template_params` (`report_id`, `param_id`) VALUES ('TOP15_ICP_ICD_Detailed', 'billing_icp'); 
INSERT INTO `seg_rep_template_params` (`report_id`, `param_id`) VALUES ('TOP15_ICP_ICD_Detailed', 'billing_icd'); 
INSERT INTO `seg_rep_template_params` (`report_id`, `param_id`) VALUES ('TOP15_ICP_ICD_Detailed', 'mem_category'); 

UPDATE `seg_rep_templates_registry` SET `rep_name` = 'Summary of TOP 15 ICD and ICP (ACR)' , `rep_description` = 'Summary of TOP 15 ICD and ICP (ACR)' WHERE `report_id` = 'Billing_Top15_RVS_ICD'; 


